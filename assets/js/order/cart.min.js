!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t){return String(t).split("").reverse().join("").match(/\d{1,3}/g).join(",").split("").reverse().join("")}function s(t,e){var i=!1;return t.find("option").each(function(t,n){if(String($(n).attr("value"))===String(e))return i=!0,!1}),i}function o(){_.each(E,function(t,e){$(".item-sid-"+e).find("input.quantity").val(t.quantity),s($(".item-sid-"+e).find("select.quantity"),t.quantity)||$(".item-sid-"+e).find("select.quantity").append("<option value="+t.quantity+">数量："+t.quantity+"</option>"),$(".item-sid-"+e).find("select.quantity").val(t.quantity),$(".item-sid-"+e).find("input.noshi").prop("checked",Boolean(1===t.noshi)),$(".item-sid-"+e).find("li.small-sum").text("¥"+n(t.quantity*t.price)),0===t.quantity&&$(".item-sid-"+e).hide()}),$(".js-cart-item").each(function(t,e){"undefined"==typeof E[$(e).data("sid")]&&$(e).hide()}),$.isEmptyObject(E)&&location.reload()}function r(t){$("#cartErrorMessage").empty();var e=window.IS_BUSINESS?"商品の個数をご確認ください。":"商品の数量と合計金額をご確認ください。";if(t){var i='<p class="allert error">'+t+e+"</p>";$("#cartErrorMessage").append(i)}}function a(){function t(t,e){_.each(t,function(t){o.length>=10||_.findWhere(o,{sid:t.sid})||(o.push(t),t.name=t.product_name,t.image_url=t.product_photo_1,/cdn\.nissin\.com/.test(t.image_url)&&(t.image_url+="&s=130"),t.url="/products/product/"+t.sid+"/",$("#relatedItemTemplate").tmpl(t).appendTo(e))})}function e(){$(".js-related-items").removeClass("loading").addClass("error")}var i,n,s=[],o=[];return $("section.purchase > ul > li[data-sid]").each(function(t,e){s.push($(e).data("sid"))}),window.IS_BUSINESS?void c():(i=new v(1,$(".js-related-items")[0],s.join(",")),n=new v(11,$(".js-related-items")[0],"",10),$(".js-related-items").addClass("loading").removeClass("error"),void(i.bdr&&n.bdr&&i.request().done(function(i){var s=$(".js-related-items .js-item-list").empty();t(i.item_list,s),n.request().done(function(i){return t(i.item_list,s),0===o.length?void e():(null===T?$(".js-related-items").each(function(t,e){T=new b(e)}):T.refresh(),void $(".js-related-items").removeClass("loading"))}).fail(e)}).fail(e)))}function c(){var t=$(".js-cart-item").eq(0).data("sid");t&&($(".js-business-related-items").addClass("loading"),p("GET_RELATED",{sid:t}).done(function(t){var e=$(".js-business-related-items .js-item-list").empty();_.each(t.products,function(t){$("#relatedItemTemplate").tmpl(t).appendTo(e)}),$(".js-business-related-items").each(function(t,e){T=new b(e)}).removeClass("loading")}))}function l(t){var e=$("section.account"),i=0,s=0,r=t.is_business?t.to_can_buy_count:0;E={},_.each(t.products,function(t){E[t.sid]={quantity:Number(t.number),noshi:Number(t.noshi),price:Number($(".js-cart-item[data-sid="+t.sid+"] li.price").text().replace(/\¥/,"").replace(/,/g,""))},i+=Number(t.number),s+=1===Number(t.noshi)?Number(t.number):0}),w.update({cart_count:i,total_amount:t.total_amount,to_free_shiping_price:t.to_free_shiping_price,is_business:t.is_business,to_can_buy_count:t.to_can_buy_count}),e.find(".js-cart-amount").text("¥"+n(t.amount)),e.find(".js-cart-tax_price").text("¥"+n(t.tax_price)),e.find(".js-cart-shipping_price").text("¥"+n(t.shipping_price)),e.find(".js-cart-noshi_amount").text("¥"+n(t.noshi_amount)),e.find(".js-cart-total_amount").text("¥"+n(t.total_amount)),e.find(".js-cart-get_point").text(n(t.get_point)),e.find(".js-cart-quantities").text(i),e.find(".js-cart-noshi-quantities").text(s),o(),window.IS_BUSINESS&&d(i,r),a()}function u(){var t=$.Deferred();return p("CHECK_ORDER").done(function(e){y=Boolean(e.match("NG")),y?$("body").addClass("server-ng"):($("body").removeClass("server-ng"),"string"==typeof C?(j.close(),location.href=C):"function"==typeof C?(j.close(),C()):null!==C&&(j.close(),$(C).trigger("click")),C=null),t.resolve()}).fail(t.reject),t.promise()}function d(t,e){if(null!==e){if(e>0)return $("a.button-purchase").addClass("disabled"),r("大量購入コーナーの商品は"+window.BUSINESS_PRODUCT_MIN_CART_QUANTITY+"ケース以上からご購入いただけます。"),!1}else if(window.BUSINESS_PRODUCT_MIN_CART_QUANTITY&&t<window.BUSINESS_PRODUCT_MIN_CART_QUANTITY)return $("a.button-purchase").addClass("disabled"),r("大量購入コーナーの商品は"+window.BUSINESS_PRODUCT_MIN_CART_QUANTITY+"ケース以上からご購入いただけます。"),!1;$("a.button-purchase").removeClass("disabled")}var h=i(12),p=i(1),m=i(8),f=i(6),g=i(18);i(19);var v=i(20),b=i(21),w=new h,y=!1,j=new f($("#pollingModal")[0]),C=null,T=null,E={};$(".js-cart-item").each(function(t,e){E[$(e).data("sid")]={quantity:Number($(e).find("input.quantity").val()),noshi:$(e).find("input.noshi").prop("checked")?1:0,price:Number($(e).find("li.price").text().replace(/\¥/,"").replace(/,/g,""))}}),$("body").on("addQueue",function(t,e){C=e,j.open()}),$("a.button-purchase").on("click",function(t){t.preventDefault(),$(this).hasClass("disabled")||(y?($("body").trigger("addQueue",function(){document.nextForm.submit()}),m("inflowRestriction","goPurchase","cart")):document.nextForm.submit())}),$(".js-cart-item").on("change",function(t){var e,i=$(this).data("sid");e=$(t.target).hasClass("quantity")?Number($(t.target).val()):Number($(this).find(".quantity").eq(0).val());var n=$(this).find("input.noshi").prop("checked")?1:0;return 0===e||e?void p("CART_CHANGE",{sid:i,quantity:e,noshi:n}).done(function(t){1===t.result?(r(!1),l(t)):(o(),r(t.errormessage),console.error(t.errormessage)),g()}).fail(function(t){o()}):void $(this).find("input.quantity").val(E[i].quantity)}),$(".js-cart-item a.button-delete").on("click",function(t){t.preventDefault(),$(this).parents(".js-cart-item").find("input.quantity").val(0),$(this).parents(".js-cart-item").trigger("change")}),a(),$("form[name=nextForm]").on("keydown",function(t){13===t.keyCode&&$(":focus").length>0&&"input"===$(":focus")[0].tagName.toLowerCase()&&t.preventDefault()}),$("#pollingModal").length>0&&u().done(function(){setInterval(u,5e3)}),window.IS_BUSINESS&&d(Number($(".js-cart-quantities").eq(0).text()),null)},function(t,e){"use strict";var i=!1,n={SEARCH:"/ajax/searchProductsAndBrands/",SEARCH_BUSINESS:"/ajax/business/searchProductsAndBrands/",CART_PUTIN:"/ajax/addItemInCart/",GET_RELATED:"/ajax/searchRelatedProducts/",SEARCH_ALLERGEN:"/ajax/searchProductsByAllergens/",SEARCH_ALLERGEN_BUSINESS:"/ajax/business/searchProductsByAllergens/",CART_CHANGE:"/ajax/recalculateAmountInCart/",CONFIRM_COUPON_POINT:"/ajax/checkCouponAndPoints/",SEARCH_PRODUCTS_LIST:"/ajax/searchProductsList/",SEARCH_ZIPCODE:"/search/post/index",GET_PERSONAL:"/personal.php",CHECK_LA:"/special/json/lacheck.txt",CHECK_ORDER:"/json/ordercheck.txt"},s={SEARCH:{search:{results:{brands:[{label:"カップヌードル",url:"/products/brands/cupnoodle"}],products:[{label:"カップヌードル ミニ",url:"/products/items/3510"},{label:"カップヌードル キング",url:"/products/items/3510"},{label:"カップヌードルカレー",url:"/products/items/3510"},{label:"スープヌードル",url:"/products/items/3510"},{label:"カップヌードル シーフードヌードル キング",url:"/products/items/351"}]}}},CART_PUTIN:{result:1,cart_count:10,total_amount:10332,to_free_shiping_price:1050,number_of_available:[{sid:"0012",number:8},{sid:"002",number:1},{sid:"003",number:10},{sid:"0032",number:0},{sid:"004",number:0},{sid:"004",number:0},{sid:"100",number:0},{sid:"101",number:0}],errormessage:"在庫が存在しません。"},GET_RELATED:{products:[{name:"カップヌードルレギュラー",image:"/assets/img/product/search/brand/item/item_00.png",url:"#"},{name:"カップヌードル チーズメキシカンチリ ビッグ",image:"/assets/img/product/search/brand/item/item_00.png",url:"#"},{name:"カップヌードルレギュラー",image:"/assets/img/product/search/brand/item/item_00.png",url:"#"},{name:"カップヌードルレギュラー",image:"/assets/img/product/search/brand/item/item_00.png",url:"#"},{name:"カップヌードルレギュラー",image:"/assets/img/product/search/brand/item/item_00.png",url:"#"},{name:"カップヌードル チーズメキシカンチリ ビッグ",image:"/assets/img/product/search/brand/item/item_00.png",url:"#"}]},CART_CHANGE:{result:0,products:[],amount:0,tax_price:0,shipping_price:0,noshi_amount:0,total_amount:0,get_point:0,errormessage:"一度に購入できる商品は100,000円までです。"},CONFIRM_COUPON_POINT:{coupon_result:1,point_result:0,total_amount:10500,errormessage:"何かエラーが発生しました",point_errormessage:"ポイントのエラーが発生しました",coupon_errormessage:"クーポンのエラーが発生しました"},SEARCH_ALLERGEN:{}},o=function(t,e){var o=$.Deferred(),r=n[t],a="json",c="POST";"SEARCH_ALLERGEN"!==t&&"SEARCH_ALLERGEN_BUSINESS"!==t&&"CHECK_LA"!==t&&"CHECK_ORDER"!==t||(a="text"),"GET_RELATED"!==t&&"CHECK_LA"!==t&&"CHECK_ORDER"!==t||(c="GET");try{if("undefined"==typeof r)throw"INVALID API TYPE";i?(console.log("API:"+t,e),setTimeout(function(){10*Math.random()<=10?o.resolve(s[t]):o.reject("通信エラーが発生しました")},800)):$.ajax({url:r,type:c,dataType:a,data:e,cache:!1}).done(function(t){o.resolve(t)}).fail(function(t,e){console.error(t,e),o.reject("通信エラーが発生しました")})}catch(l){o.reject(l)}return o.promise()};t.exports=o},function(t,e){"use strict";var i=[1168,980,788,600],n=function(t,e){return _.indexOf(e,_.find(e,function(e){return t>=e}))},s=function(){var t=this;return this.value=this.check(),this.listener=[],$(window).on("resize orientationchange",function(){t.check()}),this.value};s.prototype.check=function(){var t=window.innerWidth||$(window).width(),e=n(t,i);return this.value!==e&&(this.value=e,this.trigger()),this.value},s.prototype.get=function(){return this.value},s.prototype.on=function(t){this.listener.push(t)},s.prototype.trigger=function(){var t=this;_.each(this.listener,function(e){e(t.value)})},s.STATUS={SP:-1,PC1:0,PC2:1,PC3:2,PC4:3},t.exports=s},,,,function(t,e,i){"use strict";var n=i(2),s=new n,o=300,r=function(t){var e=this;if(this.$element=$(t),this.is_open=!1,this.close_timer=null,this.cancel_scroll=$(t).data("cancelScroll"),this.inner_scroll_top=this.$element.find(".modal-inner").scrollTop(),this.$element.on("transitionend webkitTransitionend",function(t){e.is_open||(clearTimeout(e.close_timer),e.finishClose())}),this.$element.find(".js-close-modal").on("click",function(){e.close()}),this.$element.hasClass("js-modal-shade")&&this.$element.on("click",function(){e.close()}),this.$element.find(".js-modal-shade").on("click",function(){e.close()}),this.$element.find(".js-modal-inner").on("click",function(t){t.stopPropagation()}),$(window).on("resize",function(){e.is_open&&e.setPosition()}),2===this.cancel_scroll){this.$element.find(".modal-inner").on("mousewheel wheel",function(t){t.stopPropagation();var e=t.originalEvent.deltaY,i=this.scrollHeight-$(this).outerHeight();i<=0?t.preventDefault():$(this).scrollTop()<=0&&e<0?t.preventDefault():i===$(this).scrollTop()&&e>0&&t.preventDefault(),e=i=null});var i=null;this.$element.find(".modal-inner").on("touchstart",function(t){i={x:t.originalEvent.touches[0].clientX,y:t.originalEvent.touches[0].clientY}}).on("touchmove",function(t){if(t.stopPropagation(),i){var e=i.y-t.originalEvent.touches[0].clientY,n=this.scrollHeight-$(this).outerHeight();n<=0?t.preventDefault():$(this).scrollTop()<=0&&e<0?t.preventDefault():n===$(this).scrollTop()&&e>0&&t.preventDefault(),e=n=null}}).on("touchend",function(t){i=null})}else this.cancel_scroll&&($(window).on("wheel mousewheel touchmove",function(t){e.is_open&&t.preventDefault()}),this.$element.on("touchmove",function(t){t.stopPropagation(),t.preventDefault()}))};r.prototype.open=function(){return this.is_open=!0,this.$element.removeClass("fade").addClass("show"),this.setPosition(),this},r.prototype.close=function(){var t=this;return this.is_open=!1,this.$element.addClass("fade"),this.close_timer=setTimeout(function(){t.is_open||t.finishClose()},o+50),this},r.prototype.setPosition=function(){var t=this.$element.find(".modal-inner").outerHeight();t<$(window).height()&&t>0&&s.get()>=0?this.$element.find(".modal-inner").css({top:"50%",marginTop:"-"+this.$element.find(".modal-inner").outerHeight()/2+"px"}):this.$element.find(".modal-inner").removeAttr("style")},r.prototype.finishClose=function(){return this.$element.removeClass("show fade").find(".modal-inner").removeAttr("style"),this.$element.trigger("close"),this},t.exports=r},,function(t,e){"use strict";function i(t,e,i,n){if("function"!=typeof window.ga)return void console.log("ga not defined.");var s=["send","event",t];"undefined"!=typeof e&&s.push(e),"undefined"!=typeof i&&s.push(i),"undefined"!=typeof n&&s.push(n),window.ga.apply(this,s)}t.exports=i},,,,function(t,e,i){"use strict";function n(t){return String(t).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}var s=i(6),o=i(2),r=i(8),a=i(1),c=function(){var t=this;this.responsive=new o,this.$cart_inner=$("header div.cart-inner"),this.cart_balloon=new s(this.$cart_inner[0]),this.cart_inner_is_show=!1,$("header a.cart").on("mouseenter",function(){t.showInner()}).on("mouseleave",function(){t.hideInner()}),this.$cart_inner.on("mouseenter",function(){t.cart_inner_is_show=!0}).on("mouseleave",function(){t.hideInner()}),$("main, div.main-element").on("click",".js-cart-putIn",function(e){e.preventDefault();var i=$(this);if(i.hasClass("disabled")||i.hasClass("loading"))return void console.error("can not put in");if($("body").hasClass("server-ng"))return $("body").trigger("addQueue",this),void r("inflowRestriction","inCart_"+$(this).attr("data-sid"),"LP",$(this).attr("data-sid"));if("undefined"!=typeof $("body").data("inflow-rate")){var n=Number($("body").data("inflow-rate")),s=100*Math.random();if(s>=n&&"clearQueue"!==arguments[1])return $("body").trigger("addQueue",this),void r("inflowRestriction","inCart_"+$(this).attr("data-sid")+"_probability","LP",$(this).attr("data-sid"))}var o=i.parents(".js-item-block"),a=setTimeout(function(){i.addClass("loading")},500);t.putIn($(this).attr("data-sid"),Number($(this).attr("data-quantity"))).done(function(t){o.length>0&&o.trigger("attention",{code:1,is_business:t.is_business,to_can_buy_count:t.to_can_buy_count}),clearTimeout(a),i.removeClass("loading"),i=o=null}).fail(function(t){o.length>0&&o.trigger("attention",{code:999,message:t}),clearTimeout(a),i.removeClass("loading"),i=o=null})})};c.prototype.putIn=function(t,e){var i=this,n=$.Deferred();return a("CART_PUTIN",{sid:t,quantity:e}).done(function(t){1===t.result?n.resolve(t):n.reject(t.errormessage),i.update(t)}).fail(function(t){console.error(t),n.reject(t)}),n.promise()},c.prototype.update=function(t){return t.cart_count>0?($(".js-cart-count").text(t.cart_count).parent(".cart").removeClass("empty"),$("header .cart-inner").removeClass("empty")):($(".js-cart-count").text("").parent(".cart").addClass("empty"),$("header .cart-inner").addClass("empty")),t.is_business&&($("header .cart-inner").addClass("business"),t.to_can_buy_count>0?$(".js-cart-to-can-buy-count").text(t.to_can_buy_count):$("header .cart-inner").addClass("available")),$(".js-cart-total-amount").text(n(t.total_amount)),this},c.prototype.showInner=function(){this.cart_inner_is_show=!0,this.cart_balloon.open()},c.prototype.hideInner=function(){var t=this;this.cart_inner_is_show=!1,setTimeout(function(){t.cart_inner_is_show||t.cart_balloon.close()},100)},t.exports=c},,,,,,function(t,e){"use strict";function i(t){s=t,n()}function n(){$("li.js-cart-item").each(function(t,e){"undefined"!=typeof s[$(e).data("sid")]&&($(e).children("p.allert").remove(),$(e).append('<p class="allert error">'+s[$(e).data("sid")].message+"</p>"),$(e).find("p.allert").css({margin:"20px 0px 0px",width:"auto"}))})}var s={};$.ajax({url:"/assets/json/cart_alert.json",type:"get",dataType:"json",cache:!1}).done(i),t.exports=n},function(t,e){"use strict";function i(t,e){t.html&&t.display&&$("#orderBanner").html(t.html).addClass("show")}var n="/json/cart_banner.json";window.IS_BUSINESS||$.ajax({url:n,dataType:"json",cache:!1}).done(i)},function(t,e){"use strict";function i(t,e,i,n){var s=this;return"undefined"==typeof window.BDR?(console.error("BDR is not loaded."),!1):(window["callbackRecommend_"+t]=function(t){t.item_list?s.deferred.resolve(t):s.deferred.reject()},window["callbackRecommendFail_"+t]=function(t){s.deferred.reject(t)},this.bdr=new window.BDR,this.bdr.rid=t,this.bdr.div_id=e.id,this.bdr.cb="callbackRecommend_"+t,this.bdr.cb_err="callbackRecommendFail_"+t,this.bdr.disp_cnt=n||5,this.bdr.item_id=i||"",void(this.bdr.cust_cd=""))}i.prototype.request=function(){return this.deferred=$.Deferred(),this.bdr.request(),this.deferred.promise()},t.exports=i},function(t,e,i){"use strict";function n(t){var e=this;this.$base=$(t),this.mode="undefined"==typeof this.$base.data("mode")?"pc":this.$base.data("mode"),this.$list=this.$base.find(".js-item-list > *"),this.current=0,this.touch_point=!1,this.pc_only=Boolean(this.$base.data("carousel-pc-only")),this.list_width=this.$list.width(),this.list_interval=parseInt(this.$list.css("margin-right").replace("px",""),10),this.$base.find(".js-item-list").css({width:this.$list.length*(this.list_width+this.list_interval)}),this.reset(),this.$list.length<=1&&this.setSingle(),this.$base.find(".js-next-item").on("click",function(t){t.preventDefault(),e.current+e.getSize()<e.$list.length&&e.moveTo(e.current+1)}),this.$base.find(".js-prev-item").on("click",function(t){t.preventDefault(),e.current>0&&e.moveTo(e.current-1)});var i=0;this.$base.find(".js-item-screen").on("touchstart",function(t){e.touch_point={x:t.originalEvent.touches[0].pageX,y:t.originalEvent.touches[0].screenY},i=$(window).scrollTop()}).on("touchmove",function(t){if(e.touch_point){/android/.test(window.navigator.userAgent.toLowerCase())&&!e.pc_only&&e.$list.length>1&&t.preventDefault();var n=t.originalEvent.touches[0].pageX-e.touch_point.x,s=Math.abs(t.originalEvent.touches[0].screenY-e.touch_point.y);Math.abs(n)>50?t.preventDefault():/android/.test(window.navigator.userAgent.toLowerCase())&&$(window).scrollTop(i-t.originalEvent.touches[0].screenY+e.touch_point.y),s>50&&!/android/.test(window.navigator.userAgent.toLowerCase())&&(e.touch_point=null),n>150&&e.current>0?(e.moveTo(e.current-1),e.touch_point=null):n<-150&&e.current+e.getSize()<e.$list.length&&(e.moveTo(e.current+1),e.touch_point=null)}}).on("touchend",function(){e.touch_point=null}),o.on(function(){setTimeout(function(){e.reset()},100)}),"sp"===this.mode&&$(window).on("resize",function(){setTimeout(function(){e.$list.find("img.spacer").removeAttr("style"),e.reset()},10)})}var s=i(2),o=new s;n.prototype.getSize=function(){return Math.max(1,Math.floor(this.$base.find(".js-item-screen").outerWidth()/this.list_width))},n.prototype.moveTo=function(t){this.current=t,this.$base.find(".js-item-list").css({left:this.current*(this.list_width+this.list_interval)*-1}),this.updateArrow()},n.prototype.updateArrow=function(){this.$base.find(".js-prev-item, .js-next-item").removeClass("inactive"),this.$list.css({zIndex:1}).eq(this.current).css({zIndex:2}),this.current<=0&&this.$base.find(".js-prev-item").addClass("inactive"),this.current+this.getSize()>=this.$list.length&&this.$base.find(".js-next-item").addClass("inactive")},n.prototype.reset=function(){this.$base.find(".js-item-list").css({width:1e3}),1==this.$base.data("screen-length")&&(this.$list.width(this.$base.find(".js-item-screen").width()),this.$base.hasClass("pic")&&"sp"===this.$base.data("mode")&&this.$list.width(Math.ceil(.875*$(window).width()-2))),this.list_width=this.$list.width(),this.$base.hasClass("pic")&&"sp"===this.$base.data("mode")&&(this.list_width=Math.ceil(.875*$(window).width()-2)),this.list_interval=parseInt(this.$list.css("margin-right").replace("px",""),10),this.$base.find(".js-item-list").css({width:this.$list.length*(this.list_width+this.list_interval)}),o.get()<0&&"pc"===this.mode?(this.$base.find(".js-item-list").removeAttr("style"),this.current=0):o.get()>=0&&"sp"===this.mode&&(this.$base.find(".js-item-list").removeAttr("style"),this.current=0),this.getSize()>this.$list.length?this.moveTo(0):this.current+this.getSize()>this.$list.length?this.moveTo(this.$list.length-this.getSize()):this.moveTo(this.current),this.updateArrow()},n.prototype.setSingle=function(){this.$base.addClass("single")},n.prototype.refresh=function(){this.mode="undefined"==typeof this.$base.data("mode")?"pc":this.$base.data("mode"),this.$list=this.$base.find(".js-item-list > *"),this.current=0,this.touch_point=!1,this.list_width=this.$list.width(),this.list_interval=parseInt(this.$list.css("margin-right").replace("px",""),10),this.$base.find(".js-item-list").css({width:this.$list.length*(this.list_width+this.list_interval)}),this.reset()},t.exports=n}]);